{"id":711581227,"lang":"java","time":"2Â weeks","timestamp":1654034673,"status_display":"Time Limit Exceeded","runtime":"N/A","url":"/submissions/detail/711581227/","is_pending":"Not Pending","title":"Maximum Subarray Min-Product","memory":"N/A","code":"class Solution {\n    public int maxSumMinProduct(int[] nums) {\n        int n = nums.length;\n        ArrayList<Integer> prev = prev_smaller(nums);\n   //     Collections.reverse(Arrays.asList(nums));\n        for(int i =0; i<n/2; i++){\n            int temp  =nums[i];\n            nums[i] = nums[n-i-1];\n            nums[n-i-1] = temp;\n        }\n        ArrayList<Integer> nxt = prev_smaller(nums);\n        // for(int i : nxt){\n        //     System.out.print(i + \" \");\n        // }\n        for(int i =0; i<nxt.size(); i++){\n            int r = nxt.get(i);\n            nxt.set(i, n-1-r);\n        }\n      //  Collections.reverse(Arrays.asList(nums));\n        for(int i =0; i<n/2; i++){\n            int temp  =nums[i];\n            nums[i] = nums[n-i-1];\n            nums[n-i-1] = temp;\n        }\n        Collections.reverse(nxt);\n        for(int i : prev){\n            System.out.println(i + \" \");\n        }\n        for(int i : nxt){\n            System.out.println(i + \" \");\n        }\n        long ans = 0;\n        ArrayList<Long> pref_sum = new ArrayList<>();\n        pref_sum.add((long)nums[0]);\n        for(int i =1; i<n; i++){\n            pref_sum.add(pref_sum.get(i-1) + (long)nums[i]);\n        }\n        for(int i =0; i<n ; i++){\n            long sum = pref_sum.get(nxt.get(i)-1) - (prev.get(i) == -1 ? 0 : pref_sum.get(prev.get(i)));\n            ans = Math.max(ans, (long)nums[i]*(sum));\n        }\n        return (int)(ans%1000000007L);\n        \n        \n        \n    }\n    public static ArrayList<Integer> prev_smaller(int[] a){\n        int n = a.length;\n        ArrayList<Integer> prev = new ArrayList<>();\n        Stack<Integer> st = new Stack<>();\n        st.push(-1);\n        for(int i =0; i<n; i++){\n            while (st.peek()!= -1 && a[st.peek()] >= a[i]){\n                st.pop();\n            }\n            prev.add(st.peek());\n            st.push(i);\n        }\n        return prev;\n        \n    }\n}\n\n\n\n// -1 \n// 0 \n// 0 \n// -1 \n// 3 \n// 1 \n// 5 \n// 4 \n// 4 \n// 5 \n","compare_result":"111111111111111111111111111111111111111100","title_slug":"maximum-subarray-min-product"}